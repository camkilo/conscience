<!DOCTYPE html>
<html>
<head>
    <title>Test Asset Loading</title>
</head>
<body>
    <h1>Testing Asset Manifest Loading</h1>
    <div id="results"></div>
    <script>
        const results = document.getElementById('results');
        
        async function testAssetLoading() {
            try {
                // Test 1: Load manifest
                results.innerHTML += '<p>Loading manifest...</p>';
                const manifestResponse = await fetch('/assets_manifest.json');
                const manifest = await manifestResponse.json();
                results.innerHTML += '<p>✓ Manifest loaded successfully</p>';
                results.innerHTML += '<pre>' + JSON.stringify(manifest, null, 2) + '</pre>';
                
                // Test 2: Check if floor URL is local
                const floorUrl = manifest.environment.floor;
                if (floorUrl.startsWith('/assets/')) {
                    results.innerHTML += '<p>✓ Floor URL is local: ' + floorUrl + '</p>';
                } else {
                    results.innerHTML += '<p>❌ Floor URL is external: ' + floorUrl + '</p>';
                    return;
                }
                
                // Test 3: Try to fetch floor asset
                results.innerHTML += '<p>Fetching floor asset...</p>';
                const floorResponse = await fetch(floorUrl);
                if (floorResponse.ok) {
                    const floorBlob = await floorResponse.blob();
                    results.innerHTML += '<p>✓ Floor asset loaded: ' + floorBlob.size + ' bytes</p>';
                } else {
                    results.innerHTML += '<p>❌ Floor asset failed: ' + floorResponse.status + '</p>';
                }
                
                results.innerHTML += '<h2 style="color: green;">✅ ALL TESTS PASSED!</h2>';
            } catch (error) {
                results.innerHTML += '<p style="color: red;">❌ ERROR: ' + error.message + '</p>';
            }
        }
        
        testAssetLoading();
    </script>
</body>
</html>
